<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albero Genealogico Famiglia Pricci</title>
    <style>
        /* CSS rimane identico alla versione visivamente corretta */
        body { font-family: Arial, Helvetica, sans-serif; background-color: #f0f2f5; line-height: 1.5; color: #1c1e21; margin: 0; padding: 0; padding-top: 80px; }
        .header { position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; background-color: #FDF9E4; padding: 10px 20px; border-bottom: 1px solid #ddd; box-sizing: border-box; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { margin: 0; font-size: 1.5em; }
        .header button { padding: 8px 16px; font-size: 14px; font-weight: bold; border-radius: 6px; border: 1px solid #ccc; cursor: pointer; transition: all 0.2s; }
        #pdfBtn { background-color: #4CAF50; color: white; border-color: #4CAF50; }
        #exitBtn { background-color: #f44336; color: white; border-color: #f44336; }
        .tree-container { display: flex; justify-content: flex-start; padding: 20px; }
        .tree ul { padding-left: 100px; position: relative; }
        .tree > ul { padding-left: 0; }
        .tree li { list-style-type: none; position: relative; padding: 20px 0; }
        .tree li.terminal { padding-top: 7px; padding-bottom: 7px; }
        .tree li > ul::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background-color: #ccc; }
        .tree li::before { content: ''; position: absolute; top: 3.2em; left: -100px; width: 100px; height: 4px; background-color: #ccc; }
        .tree > ul > li::before { display: none; }
        .tree li:last-child::after { content: ''; position: absolute; top: 3.4em; left: -100px; width: 4px; height: 100%; background-color: #f0f2f5; }
        .tree .card { padding: 10px 15px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); display: inline-block; width: 250px; box-sizing: border-box; text-align: left; }
        .card.male-led { border-top: 5px solid #4a90e2; }
        .card.female-led { border-top: 5px solid #e24a8d; }
        .card.has-children { border-left: 2px solid #28a745; border-right: 2px solid #28a745; border-bottom: 2px solid #28a745; }
        .card.no-children { border-left: 2px solid #ffc107; border-right: 2px solid #ffc107; border-bottom: 2px solid #ffc107; }
        .info h4 { margin: 0 0 5px 0; font-size: 16px; color: #1c1e21; line-height: 1.2; }
        .info p { margin: 2px 0; font-size: 12px; color: #606770; }
        .tree input[type=checkbox] { display: none; }
        .tree label { cursor: pointer; }
        .tree label:hover .card { transform: scale(1.02); }
        .tree input[type=checkbox] ~ ul { display: none; }
        .tree input[type=checkbox]:checked ~ ul { display: block; }
        @media only screen and (max-width: 600px) {
            .tree ul { padding-left: 50px; }
            .tree > ul { padding-left: 0; }
            .tree li::before { left: -50px; width: 50px; }
            .tree li:last-child::after { left: -50px; }
            .header h1 { font-size: 1.2em; }
            .header button { padding: 6px 10px; font-size: 12px; }
            .info h4 { font-size: 17px; }
            .info p { font-size: 13px; }
        }
    </style>
</head>
<body>

    <div class="header">
        <button id="pdfBtn">Genera PDF</button>
        <h1>Famiglia Pricci</h1>
        <button id="exitBtn">Esci</button>
    </div>

    <div class="tree-container" id="main-tree-container">
        <div class="tree">
            <ul><li><input type="checkbox" id="root" checked><label for="root"><div class="card male-led has-children"><div class="info"><h4>Luigi Pricci &<br>Teresa Grilletti</h4><p>Sposati il 03/12/1956</p><p>Luigi: 16/11/1933 | On: 21/06</p><p>Teresa: 05/03/1937 | On: 15/10</p></div></div></label><ul><li><input type="checkbox" id="angela" checked><label for="angela"><div class="card female-led has-children"><div class="info"><h4>Angela Pricci &<br>Onofrio Lorusso</h4><p>Sposati il 09/08/1975</p><p>Angela: 13/01/1957 | On: 02/08</p><p>Onofrio: 05/08/1951 | On: 12/06</p></div></div></label><ul><li><input type="checkbox" id="benny"><label for="benny"><div class="card male-led has-children"><div class="info"><h4>Benny Lorusso &<br>Genny Lepore</h4><p>Sposati il 26/07/2008</p><p>Benny: 17/11/1975 | On: 21/03</p><p>Genny: 04/07/1975 | On: 11/04</p></div></div></label><ul><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Alessandro Lorusso</h4><p>Nato: 17/07/2010 | On: 26/08</p></div></div></li><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Alice Lorusso</h4><p>Nata: 20/07/2013 | On: 13/06</p></div></div></li><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Nina Lorusso</h4><p>Nata: 29/11/2015 | On: 15/12</p></div></div></li></ul></li><li><input type="checkbox" id="cinzia"><label for="cinzia"><div class="card female-led has-children"><div class="info"><h4>Cinzia Lorusso &<br>Gianni Rotondi</h4><p>Sposati il 13/09/2014</p><p>Cinzia: 06/04/1980</p><p>Gianni: 08/03/1974 | On: 24/06</p></div></div></label><ul><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Nicoletta Rotondi</h4><p>Nata: 12/02/2019 | On: 06/12</p></div></div></li></ul></li></ul></li><li><input type="checkbox" id="maria-antonietta" checked><label for="maria-antonietta"><div class="card female-led has-children"><div class="info"><h4>Maria Antonietta Pricci &<br>Saverio Chiarappa</h4><p>Sposati il 09/09/2000</p><p>M. Antonietta: 21/05/1958 | On: 13/06</p><p>Saverio: 26/11/1951 | On: 03/12</p></div></div></label><ul><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Martino Chiarappa</h4><p>Nato: 24/05/1997 | On: 11/11</p></div></div></li><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Cristiano Chiarappa</h4><p>Nato: 20/06/2001 | On: 07/04</p></div></div></li></ul></li><li><input type="checkbox" id="marica" checked><label for="marica"><div class="card female-led has-children"><div class="info"><h4>Marica Pricci &<br>Sebastiano Mazzarisi</h4><p>Sposati il 04/07/1987</p><p>Marica: 12/04/1961 | On: 12/09</p><p>Sebastiano: 07/05/1957 | On: 20/01</p></div></div></label><ul><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Maria Grazia Mazzarisi</h4><p>Nata: 21/01/1989 | On: 12/09</p></div></div></li><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Onofrio Mazzarisi</h4><p>Nato: 05/06/1992 | On: 12/06</p></div></div></li><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Teresa Mazzarisi</h4><p>Nata: 01/04/1994 | On: 15/10</p></div></div></li></ul></li><li><input type="checkbox" id="vanna" checked><label for="vanna"><div class="card female-led has-children"><div class="info"><h4>Vanna Pricci &<br>Domenico Lefemine</h4><p>Sposati il 28/08/1991</p><p>Vanna: 11/09/1963 | On: 24/06</p><p>Domenico: 06/02/1957 | On: 04/08</p></div></div></label><ul><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Flavia Lefemine</h4><p>Nata: 16/11/1996 | On: 07/05</p></div></div></li><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Francesco Lefemine</h4><p>Nato: 20/03/2000 | On: 04/10</p></div></div></li></ul></li><li class="terminal"><div class="card male-led no-children"><div class="info"><h4>Giovanni Pricci &<br>Rosa Bianco</h4><p>Sposati il 29/12/2004</p><p>Giovanni: 24/10/1964 | On: 24/06</p><p>Rosa: 02/09/1971 | On: 23/08</p></div></div></li><li><input type="checkbox" id="giuseppe" checked><label for="giuseppe"><div class="card male-led has-children"><div class="info"><h4>Giuseppe Pricci &<br>Anna Trivisani</h4><p>Sposati il 09/07/1997</p><p>Giuseppe: 12/08/1968 | On: 19/03</p><p>Anna: 12/07/1969 | On: 26/07</p></div></div></label><ul><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Gilda Pricci</h4><p>Nata: 29/06/2004 | On: 13/02</p></div></div></li><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Asia Pricci</h4><p>Nata: 07/06/2006 | On: 19/02</p></div></div></li></ul></li><li class="terminal"><div class="card female-led no-children"><div class="info"><h4>Tiziana Pricci &<br>Riccardo Dalena</h4><p>Sposati il 04/10/2002</p><p>Tiziana: 27/06/1972 | On: 03/03</p><p>Riccardo: 11/04/1973 | On: 03/04</p></div></div></li></ul></li></ul>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('exitBtn').addEventListener('click', () => window.close());
            document.getElementById('pdfBtn').addEventListener('click', generateMixedLayoutPdf);
        });

        function generateMixedLayoutPdf() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('l', 'mm', 'a4');
            const pageHeight = pdf.internal.pageSize.getHeight();
            const pageWidth = pdf.internal.pageSize.getWidth();

            const coupleCardHeight = 22;
            const singleCardHeight = 12;
            const verticalYSpacing = 15;
            const horizontalXSpacing = 4;
            const xMargin = 5;
            const yMargin = 15;
            const textMargin = 3;
            const specialPositions = {};

            function parseNode(element) {
                const card = element.querySelector('.card');
                const h4 = card.querySelector('h4');
                const pTags = card.querySelectorAll('p');
                const isSingle = !h4.innerHTML.includes('&');
                let name1 = '', name2 = '';
                if (isSingle) {
                    name1 = h4.textContent.trim();
                } else {
                    const names = h4.innerHTML.split('<br>');
                    name1 = names[0].trim().replace('&amp;', '&');
                    name2 = names[1] ? names[1].trim().replace('&amp;', '&') : '';
                }
                const classList = card.classList;
                return {
                    name1: name1,
                    name2: name2,
                    isSingle: isSingle,
                    details: Array.from(pTags).map(p => p.textContent),
                    children: Array.from(element.querySelectorAll(':scope > ul > li')),
                    isMaleLed: classList.contains('male-led'),
                    isFemaleLed: classList.contains('female-led'),
                    hasChildren: classList.contains('has-children')
                };
            }
            
            function drawBox(x, y, data) {
                const titleFontSize = 8.5;
                const detailFontSize = 6;
                pdf.setFont('helvetica');
                const padding = textMargin * 2;
                let maxTextWidth = 0;
                if (data.isSingle) {
                    pdf.setFontSize(titleFontSize).setFont(undefined, 'bold');
                    maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(data.name1));
                    pdf.setFontSize(detailFontSize).setFont(undefined, 'normal');
                    if (data.details[0]) maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(data.details[0]));
                } else {
                    pdf.setFontSize(titleFontSize).setFont(undefined, 'bold');
                    maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(data.name1), pdf.getTextWidth(data.name2));
                    pdf.setFontSize(detailFontSize).setFont(undefined, 'normal');
                    data.details.forEach(d => maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(d)));
                }
                const cardWidth = maxTextWidth + padding;
                const cardHeight = data.isSingle ? singleCardHeight : coupleCardHeight;
                
                pdf.setFillColor(255, 255, 255);
                pdf.rect(x, y, cardWidth, cardHeight, 'F');
                
                const borderWidth = 0.5;
                pdf.setLineWidth(borderWidth);

                if (data.isMaleLed) {
                    pdf.setDrawColor(74, 144, 226); 
                } else if (data.isFemaleLed) {
                    pdf.setDrawColor(226, 74, 141);
                } else {
                    pdf.setDrawColor(150);
                }
                pdf.line(x, y, x + cardWidth, y);

                if (data.hasChildren) {
                    pdf.setDrawColor(40, 167, 69);
                } else {
                    pdf.setDrawColor(255, 193, 7);
                }
                pdf.line(x, y, x, y + cardHeight);
                pdf.line(x + cardWidth, y, x + cardWidth, y + cardHeight);
                pdf.line(x, y + cardHeight, x + cardWidth, y + cardHeight);

                pdf.setTextColor(0, 0, 0);
                const textMarginActual = padding / 2;
                if (data.isSingle) {
                    pdf.setFontSize(titleFontSize).setFont(undefined, 'bold');
                    pdf.text(data.name1, x + textMarginActual, y + 5);
                    pdf.setFontSize(detailFontSize).setFont(undefined, 'normal');
                    if (data.details[0]) pdf.text(data.details[0], x + textMarginActual, y + 9);
                } else {
                    pdf.setFontSize(titleFontSize).setFont(undefined, 'bold');
                    pdf.text(data.name1, x + textMarginActual, y + 5);
                    pdf.text(data.name2, x + textMarginActual, y + 9);
                    pdf.setFontSize(detailFontSize).setFont(undefined, 'normal');
                    if (data.details[1]) pdf.text(data.details[1], x + textMarginActual, y + 13);
                    if (data.details[2]) pdf.text(data.details[2], x + textMarginActual, y + 16.5);
                    if (data.details[0]) pdf.text(data.details[0], x + textMarginActual, y + 20);
                }
                return { x, y, width: cardWidth, height: cardHeight };
            }

            function isAngela(childEl) {
                const h4 = childEl.querySelector('.card h4');
                return h4 && h4.textContent.includes('Angela Pricci');
            }
            
            function isMariaAntonietta(childEl) {
                const h4 = childEl.querySelector('.card h4');
                return h4 && h4.textContent.includes('Maria Antonietta Pricci');
            }
            
            function isVanna(childEl) {
                const h4 = childEl.querySelector('.card h4');
                return h4 && h4.textContent.includes('Vanna Pricci');
            }
            
            function isGiuseppe(childEl) {
                const h4 = childEl.querySelector('.card h4');
                return h4 && h4.textContent.includes('Giuseppe Pricci');
            }

            // --- FASE 1: DISEGNA TUTTI I BOX E MEMORIZZA LE POSIZIONI ---
            const rootElement = document.querySelector('#main-tree-container .tree > ul > li');
            const rootData = parseNode(rootElement);
            const childrenL2 = rootData.children;
            let totalWidthL2 = 0;
            const childWidths = childrenL2.map(childEl => {
                const data = parseNode(childEl);
                let maxTextWidth = 0;
                pdf.setFontSize(8.5).setFont(undefined, 'bold');
                maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(data.name1), pdf.getTextWidth(data.name2));
                pdf.setFontSize(6).setFont(undefined, 'normal');
                data.details.forEach(d => maxTextWidth = Math.max(maxTextWidth, pdf.getTextWidth(d)));
                const finalWidth = maxTextWidth + (textMargin * 2);
                totalWidthL2 += finalWidth;
                return finalWidth;
            });
            totalWidthL2 += (childrenL2.length - 1) * horizontalXSpacing;

            const rootBox = drawBox((pageWidth - (pdf.getTextWidth(rootData.name1) + textMargin * 2)) / 2, yMargin, rootData);
            specialPositions['root'] = rootBox;
            
            let currentX = (pageWidth - totalWidthL2) / 2;
            let currentY = rootBox.y + rootBox.height + verticalYSpacing;
            
            childrenL2.forEach((childL2_element, index) => {
                const childL2_data = parseNode(childL2_element);
                const childL2_box = drawBox(currentX, currentY, childL2_data);
                specialPositions[`gen2_${index}`] = childL2_box;

                if (isAngela(childL2_element)) {
                    let verticalY = currentY + childL2_box.height + 60;
                    const bennyEl = childL2_data.children.find(ch => ch.querySelector('.card h4').textContent.includes('Benny Lorusso'));
                    const cinziaEl = childL2_data.children.find(ch => ch.querySelector('.card h4').textContent.includes('Cinzia Lorusso'));
                    if (bennyEl) {
                        const bennyData = parseNode(bennyEl);
                        const bennyBox = drawBox(currentX + 10, verticalY, bennyData);
                        specialPositions.benny = bennyBox;
                        specialPositions.bennyChildren = [];
                        let horizontalX = currentX + 10 + bennyBox.width + 10;
                        bennyData.children.forEach(grandchild => {
                            const grandchildData = parseNode(grandchild);
                            const grandchildHeight = grandchildData.isSingle ? singleCardHeight : coupleCardHeight;
                            const alignedY = bennyBox.y + bennyBox.height - grandchildHeight;
                            const grandchildBox = drawBox(horizontalX, alignedY, grandchildData);
                            specialPositions.bennyChildren.push(grandchildBox);
                            horizontalX += grandchildBox.width + 5;
                        });
                        verticalY += bennyBox.height + 5;
                    }
                    if (cinziaEl) {
                        const cinziaData = parseNode(cinziaEl);
                        const cinziaBox = drawBox(currentX + 10, verticalY, cinziaData);
                        specialPositions.cinzia = cinziaBox;
                        specialPositions.cinziaChildren = [];
                        if (cinziaData.children.length > 0) {
                            const nicolettaData = parseNode(cinziaData.children[0]);
                            const nicolettaHeight = nicolettaData.isSingle ? singleCardHeight : coupleCardHeight;
                            const alignedY = cinziaBox.y + cinziaBox.height - nicolettaHeight;
                            const nicolettaBox = drawBox(currentX + 10 + cinziaBox.width + 10, alignedY, nicolettaData);
                            specialPositions.cinziaChildren.push(nicolettaBox);
                        }
                    }
                } else {
                    let verticalY = currentY + childL2_box.height + 10;
                    if (childL2_data.children.length > 0) {
                        childL2_data.children.forEach((childL3_element, l3_index) => {
                            const childL3_data = parseNode(childL3_element);
                            let maxL3Width = 0;
                            pdf.setFontSize(8.5).setFont(undefined, 'bold');
                            maxL3Width = Math.max(maxL3Width, pdf.getTextWidth(childL3_data.name1), (childL3_data.name2 ? pdf.getTextWidth(childL3_data.name2) : 0));
                            pdf.setFontSize(6).setFont(undefined, 'normal');
                            childL3_data.details.forEach(d => maxL3Width = Math.max(maxL3Width, pdf.getTextWidth(d)));
                            const childL3_width = maxL3Width + (textMargin * 2);
                            const parentRightEdge = currentX + childWidths[index];
                            const alignedX = parentRightEdge - childL3_width + 2;
                            const childL3_box = drawBox(alignedX, verticalY, childL3_data);
                            specialPositions[`gen3_${index}_${l3_index}`] = childL3_box;
                            verticalY += childL3_box.height + 5;
                        });
                    }
                }
                currentX += childWidths[index] + horizontalXSpacing;
            });
            
            // --- FASE 2: DISEGNO DI TUTTE LE LINEE USANDO LE POSIZIONI MEMORIZZATE ---
            // MODIFICA: Spessore delle linee di collegamento ridotto
            pdf.setLineWidth(0.4);
            pdf.setDrawColor(150);

            childrenL2.forEach((childL2_element, index) => {
                const parentBox = specialPositions.root;
                const childBox = specialPositions[`gen2_${index}`];
                
                const parentBottomCenter = { x: parentBox.x + parentBox.width / 2, y: parentBox.y + parentBox.height };
                const childTopCenter = { x: childBox.x + childBox.width / 2, y: childBox.y };
                pdf.line(parentBottomCenter.x, parentBottomCenter.y, parentBottomCenter.x, parentBottomCenter.y + verticalYSpacing / 2);
                pdf.line(parentBottomCenter.x, parentBottomCenter.y + verticalYSpacing / 2, childTopCenter.x, childTopCenter.y - verticalYSpacing / 2);
                pdf.line(childTopCenter.x, childTopCenter.y - verticalYSpacing / 2, childTopCenter.x, childTopCenter.y);

                const childL2_data = parseNode(childL2_element);
                if (childL2_data.children.length > 0) {
                    if (isAngela(childL2_element)) {
                        const angelaBox = childBox;
                        const bennyBox = specialPositions.benny;
                        const cinziaBox = specialPositions.cinzia;
                        
                        const lineStartX = angelaBox.x + 5; 
                        const parentBottomY = angelaBox.y + angelaBox.height;
                        const cinziaCenterY = cinziaBox.y + cinziaBox.height / 2;
                        pdf.line(lineStartX, parentBottomY, lineStartX, cinziaCenterY);
                        
                        const bennyCenterY = bennyBox.y + bennyBox.height / 2;
                        pdf.line(lineStartX, bennyCenterY, bennyBox.x, bennyCenterY);
                        pdf.line(lineStartX, cinziaCenterY, cinziaBox.x, cinziaCenterY);

                        const childrenOfBenny = specialPositions.bennyChildren;
                        if (bennyBox && childrenOfBenny && childrenOfBenny.length > 0) {
                            const lastChild = childrenOfBenny[childrenOfBenny.length - 1];
                            const armEndX = lastChild.x + lastChild.width / 2;
                            const busY = bennyBox.y + (bennyBox.height * 0.3);
                            const armStartX = bennyBox.x + bennyBox.width;
                            pdf.line(armStartX, busY, armEndX, busY);
                            childrenOfBenny.forEach(figlio => {
                                const figlioTopCenter = { x: figlio.x + figlio.width / 2, y: figlio.y };
                                pdf.line(figlioTopCenter.x, busY, figlioTopCenter.x, figlioTopCenter.y);
                            });
                        }

                        const childOfCinzia = specialPositions.cinziaChildren ? specialPositions.cinziaChildren[0] : null;
                        if (cinziaBox && childOfCinzia) {
                            const nicolettaTopCenter = { x: childOfCinzia.x + childOfCinzia.width / 2, y: childOfCinzia.y };
                            const busY = cinziaBox.y + (cinziaBox.height * 0.3);
                            const armStartX = cinziaBox.x + cinziaBox.width;
                            pdf.line(armStartX, busY, nicolettaTopCenter.x, busY);
                            pdf.line(nicolettaTopCenter.x, busY, nicolettaTopCenter.x, nicolettaTopCenter.y);
                        }

                    } else {
                        let lineStartX;
                        if (isMariaAntonietta(childL2_element)) {
                            lineStartX = childBox.x + 5;
                        } else if (isVanna(childL2_element) || isGiuseppe(childL2_element)) {
                            lineStartX = childBox.x + 2;
                        } else {
                            lineStartX = childBox.x + 1;
                        }
                        
                        const parentBottomY = childBox.y + childBox.height;
                        const firstChildL3 = specialPositions[`gen3_${index}_0`];
                        if (!firstChildL3) return; 
                        
                        const lastChildL3Data = parseNode(childL2_data.children[childL2_data.children.length-1]);
                        const lastChildL3Height = lastChildL3Data.isSingle ? singleCardHeight : coupleCardHeight;
                        let lastY = firstChildL3.y;
                        for(let i=1; i<childL2_data.children.length; i++) {
                            const prevChildData = parseNode(childL2_data.children[i-1]);
                            lastY += (prevChildData.isSingle ? singleCardHeight : coupleCardHeight) + 5;
                        }
                        const lastChildCenterY = lastY + lastChildL3Height / 2;
                        
                        pdf.line(lineStartX, parentBottomY, lineStartX, lastChildCenterY);

                        childL2_data.children.forEach((l3_el, l3_idx) => {
                            const l3_box = specialPositions[`gen3_${index}_${l3_idx}`];
                            if(l3_box) {
                                const childCenterY = l3_box.y + l3_box.height / 2;
                                pdf.line(lineStartX, childCenterY, l3_box.x, childCenterY);
                            }
                        });
                    }
                }
            });

            pdf.save('albero-genealogico-famiglia-pricci.pdf');
        }
    </script>

</body>
</html>