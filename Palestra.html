<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palestra Joy Fit</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const gymData = {
            istruttori: {
                "Mirella": ["Pilates"],
                "Titti": ["Body Sculpt"],
                "Checco": ["Funzionale"],
                "Sabrina": ["Aerea Kids"],
                "Antonella": ["Pilates"],
                "Saverio C.": ["Defence System", "Krav Maga"],
                "Roberta": ["Postural/Pilates"],
                "Rosilenia": ["Functional Kids"],
                "Mimmo": ["Slow Fit"],
                "Matteo": ["Calisthenics Junior", "Calisthenics"]
            },
            corsi: {
                "Pilates": [
                    {giorno: "Lunedì", ora: "07:30", istruttore: "Mirella"},
                    {giorno: "Lunedì", ora: "17:15", istruttore: "Antonella"},
                    {giorno: "Lunedì", ora: "18:15", istruttore: "Antonella"},
                    {giorno: "Lunedì", ora: "19:15", istruttore: "Antonella"},
                    {giorno: "Mercoledì", ora: "07:00", istruttore: "Mirella"},
                    {giorno: "Giovedì", ora: "17:15", istruttore: "Antonella"},
                    {giorno: "Giovedì", ora: "18:15", istruttore: "Antonella"},
                    {giorno: "Giovedì", ora: "19:15", istruttore: "Antonella"},
                    {giorno: "Venerdì", ora: "07:00", istruttore: "Mirella"}
                ],
                "Body Sculpt": [
                    {giorno: "Lunedì", ora: "09:15", istruttore: "Titti"},
                    {giorno: "Lunedì", ora: "19:30", istruttore: "Titti"},
                    {giorno: "Mercoledì", ora: "18:30", istruttore: "Titti"},
                    {giorno: "Giovedì", ora: "09:15", istruttore: "Titti"},
                    {giorno: "Venerdì", ora: "19:30", istruttore: "Titti"},
                    {giorno: "Sabato", ora: "09:00", istruttore: "Titti"}
                ],
                "Funzionale": [
                    {giorno: "Lunedì", ora: "13:30", istruttore: "Checco"},
                    {giorno: "Lunedì", ora: "14:30", istruttore: "Checco"},
                    {giorno: "Martedì", ora: "19:15", istruttore: "Checco"},
                    {giorno: "Giovedì", ora: "13:30", istruttore: "Checco"},
                    {giorno: "Giovedì", ora: "14:30", istruttore: "Checco"},
                    {giorno: "Giovedì", ora: "19:15", istruttore: "Checco"},
                    {giorno: "Sabato", ora: "11:00", istruttore: "Checco"}
                ],
                "Aerea Kids": [
                    {giorno: "Lunedì", ora: "17:00", istruttore: "Sabrina"},
                    {giorno: "Mercoledì", ora: "17:00", istruttore: "Sabrina"}
                ],
                "Defence System": [
                    {giorno: "Lunedì", ora: "18:00", istruttore: "Saverio C."},
                    {giorno: "Mercoledì", ora: "18:00", istruttore: "Saverio C."}
                ],
                "Krav Maga": [
                    {giorno: "Lunedì", ora: "20:00", istruttore: "Saverio C."},
                    {giorno: "Mercoledì", ora: "20:00", istruttore: "Saverio C."}
                ],
                "Postural/Pilates": [
                    {giorno: "Martedì", ora: "09:00", istruttore: "Roberta"},
                    {giorno: "Martedì", ora: "10:00", istruttore: "Roberta"},
                    {giorno: "Venerdì", ora: "09:00", istruttore: "Roberta"},
                    {giorno: "Venerdì", ora: "10:00", istruttore: "Roberta"}
                ],
                "Functional Kids": [
                    {giorno: "Martedì", ora: "16:00", istruttore: "Rosilenia"},
                    {giorno: "Venerdì", ora: "16:00", istruttore: "Rosilenia"}
                ],
                "Slow Fit": [
                    {giorno: "Martedì", ora: "18:30", istruttore: "Mimmo"},
                    {giorno: "Martedì", ora: "19:30", istruttore: "Mimmo"},
                    {giorno: "Venerdì", ora: "18:30", istruttore: "Mimmo"},
                    {giorno: "Venerdì", ora: "19:30", istruttore: "Mimmo"}
                ],
                "Calisthenics Junior": [
                    {giorno: "Martedì", ora: "18:00", istruttore: "Matteo"},
                    {giorno: "Giovedì", ora: "18:00", istruttore: "Matteo"}
                ],
                "Calisthenics": [
                    {giorno: "Martedì", ora: "20:15", istruttore: "Matteo"},
                    {giorno: "Giovedì", ora: "20:15", istruttore: "Matteo"},
                    {giorno: "Venerdì", ora: "20:15", istruttore: "Matteo"}
                ]
            },
            orari: {
                segreteria: [
                    "Lunedì: 08:00 - 12:00, 16:00 - 20:00",
                    "Martedì: 08:00 - 12:00, 16:00 - 20:00",
                    "Mercoledì: 16:00 - 20:00",
                    "Giovedì: 08:00 - 12:00, 16:00 - 20:00",
                    "Venerdì: 08:00 - 12:00, 16:00 - 20:00",
                    "Sabato: 09:00 - 12:00"
                ],
                salaFitness: [
                    "Lunedì: 07:00 - 21:30",
                    "Martedì: 07:00 - 21:30",
                    "Mercoledì: 07:00 - 21:30",
                    "Giovedì: 07:00 - 21:30",
                    "Venerdì: 07:00 - 21:30",
                    "Sabato: 09:00 - 12:00, 15:00 - 18:00",
                    "Domenica: chiuso"
                ]
            }
        };

        function App() {
            const [view, setView] = React.useState('welcome');
            const [selectedInstructor, setSelectedInstructor] = React.useState(null);
            const [selectedCourse, setSelectedCourse] = React.useState(null);
            const [selectedDay, setSelectedDay] = React.useState(null);

            // Calcolo delle quantità
            const courseCount = Object.keys(gymData.corsi).length; // 11
            const instructorCount = Object.keys(gymData.istruttori).length; // 10
            const daysOfWeek = ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];
            const daysCount = daysOfWeek.length; // 6

            const renderWelcome = () => {
                const menuButtons = [
                    { label: 'Corsi', view: 'corsi', count: courseCount },
                    { label: 'Orari', view: 'orari', count: null },
                    { label: 'Istruttori', view: 'istruttori', count: instructorCount },
                    { label: 'Giorni', view: 'giorni', count: daysCount }
                ];

                return (
                    <div className="text-center">
                        <h1 className="text-3xl font-bold mb-4">Benvenuto nella Palestra Joy Fit</h1>
                        <p className="mb-4">Scegli cosa vuoi vedere</p>
                        <div className="space-x-2">
                            {menuButtons.map(button => (
                                <button
                                    key={button.label}
                                    onClick={() => setView(button.view)}
                                    className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
                                >
                                    {button.label}{button.count !== null ? ` [${button.count}]` : ''}
                                </button>
                            ))}
                        </div>
                        <div className="mt-8">
                            <button
                                onClick={() => window.close()}
                                className="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                            >
                                Esci
                            </button>
                        </div>
                    </div>
                );
            };

            const renderInstructors = () => {
                const instructors = Object.keys(gymData.istruttori);

                // Calcola il numero di sessioni per ogni istruttore
                const instructorSessionsCount = instructors.map(instructor => {
                    let count = 0;
                    gymData.istruttori[instructor].forEach(course => {
                        count += gymData.corsi[course].filter(session => session.istruttore === instructor).length;
                    });
                    return { instructor, count };
                });

                return (
                    <div className="text-center">
                        <h2 className="text-2xl font-bold mb-4">Istruttori</h2>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                            {instructorSessionsCount.map(item => (
                                <button
                                    key={item.instructor}
                                    onClick={() => setSelectedInstructor(item.instructor)}
                                    className="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
                                >
                                    {item.instructor} [{item.count}]
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('welcome')} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                            Torna indietro
                        </button>
                    </div>
                );
            };

            const renderInstructorCourses = () => (
                <div className="text-center">
                    <h2 className="text-2xl font-bold mb-4">Corsi di {selectedInstructor}</h2>
                    <ul className="list-disc list-inside">
                        {gymData.istruttori[selectedInstructor].map(course => (
                            <li key={course} className="mb-2">
                                <strong>{course}</strong>
                                <ul className="list-none pl-4">
                                    {gymData.corsi[course]
                                        .filter(session => session.istruttore === selectedInstructor)
                                        .map((session, index) => (
                                            <li key={index}>
                                                {session.giorno} alle {session.ora}
                                            </li>
                                        ))}
                                </ul>
                            </li>
                        ))}
                    </ul>
                    <button onClick={() => setSelectedInstructor(null)} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                        Torna agli istruttori
                    </button>
                </div>
            );

            const renderCourses = () => {
                const courses = Object.keys(gymData.corsi);

                // Calcola il numero di sessioni per ogni corso
                const courseSessionsCount = courses.map(course => {
                    const count = gymData.corsi[course].length;
                    return { course, count };
                });

                return (
                    <div className="text-center">
                        <h2 className="text-2xl font-bold mb-4">Seleziona un Corso</h2>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                            {courseSessionsCount.map(item => (
                                <button
                                    key={item.course}
                                    onClick={() => setSelectedCourse(item.course)}
                                    className="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded"
                                >
                                    {item.course} [{item.count}]
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('welcome')} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                            Torna indietro
                        </button>
                    </div>
                );
            };

            const renderCourseDetails = () => (
                <div className="text-center">
                    <h2 className="text-2xl font-bold mb-4">Dettagli del Corso: {selectedCourse}</h2>
                    <ul className="list-disc list-inside">
                        {gymData.corsi[selectedCourse].map((session, index) => (
                            <li key={index}>
                                {session.giorno} alle {session.ora} (Istruttore: {session.istruttore})
                            </li>
                        ))}
                    </ul>
                    <button onClick={() => setSelectedCourse(null)} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                        Torna ai corsi
                    </button>
                </div>
            );

            const renderDays = () => {
                const days = ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];

                // Calcola il numero di sessioni per ogni giorno
                const daySessionsCount = days.map(day => {
                    let count = 0;
                    Object.values(gymData.corsi).forEach(courseSessions => {
                        count += courseSessions.filter(session => session.giorno === day).length;
                    });
                    return { day, count };
                });

                return (
                    <div className="text-center">
                        <h2 className="text-2xl font-bold mb-4">Seleziona un Giorno</h2>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                            {daySessionsCount.map(item => (
                                <button
                                    key={item.day}
                                    onClick={() => setSelectedDay(item.day)}
                                    className="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded"
                                >
                                    {item.day} [{item.count}]
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('welcome')} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                            Torna indietro
                        </button>
                    </div>
                );
            };

            const renderDayCourses = () => {
                const daySessions = [];
                Object.keys(gymData.corsi).forEach(courseName => {
                    gymData.corsi[courseName].forEach(session => {
                        if (session.giorno === selectedDay) {
                            daySessions.push({
                                courseName,
                                ...session
                            });
                        }
                    });
                });

                // Ordina i corsi per ora crescente
                daySessions.sort((a, b) => {
                    const [hourA, minuteA] = a.ora.split(':').map(Number);
                    const [hourB, minuteB] = b.ora.split(':').map(Number);
                    return hourA * 60 + minuteA - (hourB * 60 + minuteB);
                });

                return (
                    <div className="text-center">
                        <h2 className="text-2xl font-bold mb-4">Corsi del {selectedDay}</h2>
                        {daySessions.length > 0 ? (
                            <ul className="list-disc list-inside">
                                {daySessions.map((session, index) => (
                                    <li key={index}>
                                        {session.ora}: {session.courseName} (Istruttore: {session.istruttore})
                                    </li>
                                ))}
                            </ul>
                        ) : (
                            <p>Nessun corso disponibile per questo giorno.</p>
                        )}
                        <button onClick={() => setSelectedDay(null)} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                            Torna ai giorni
                        </button>
                    </div>
                );
            };

            const renderOrari = () => (
                <div className="text-center">
                    <h2 className="text-2xl font-bold mb-4">Orari</h2>
                    <h3 className="text-xl font-bold mb-2">Orario Segreteria</h3>
                    <ul className="list-disc list-inside">
                        {gymData.orari.segreteria.map((orario, index) => (
                            <li key={index}>{orario}</li>
                        ))}
                    </ul>
                    <h3 className="text-xl font-bold mt-4 mb-2">Orario Sala Fitness</h3>
                    <ul className="list-disc list-inside">
                        {gymData.orari.salaFitness.map((orario, index) => (
                            <li key={index}>{orario}</li>
                        ))}
                    </ul>
                    <button onClick={() => setView('welcome')} className="mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                        Torna indietro
                    </button>
                </div>
            );

            const renderView = () => {
                if (view === 'welcome') return renderWelcome();
                if (view === 'istruttori') {
                    return selectedInstructor ? renderInstructorCourses() : renderInstructors();
                }
                if (view === 'corsi') {
                    return selectedCourse ? renderCourseDetails() : renderCourses();
                }
                if (view === 'orari') return renderOrari();
                if (view === 'giorni') {
                    return selectedDay ? renderDayCourses() : renderDays();
                }
                return <div>Contenuto per {view} in arrivo...</div>;
            };

            return (
                <div className="container mx-auto p-4">
                    {renderView()}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
