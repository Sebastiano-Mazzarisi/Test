<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Joy Fit</title>
<meta content="#3498db" name="theme-color"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="Joy Fit" name="apple-mobile-web-app-title"/>
<link href="https://sebastiano-mazzarisi.github.io/Test/JoyFit.jpg" rel="icon"/>
<link href="https://sebastiano-mazzarisi.github.io/Test/JoyFit.jpg" rel="apple-touch-icon"/>
<style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            scroll-behavior: smooth;
            font-size: 1.1em;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-top: 10px;
            margin-bottom: 20px;
            font-size: 2.8em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        .logo {
            height: 64px;
            width: 64px;
            border-radius: 8px;
            object-fit: cover;
            vertical-align: middle;
        }
        h2 {
            color: #3498db;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 35px;
            font-size: 2em;
        }
        h3 {
            color: #2ecc71;
            margin-top: 25px;
            font-size: 1.6em;
        }
        p {
            margin-bottom: 15px;
            color: #555;
            font-size: 1.1em;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        ul li {
            background-color: #ecf0f1;
            margin-bottom: 8px;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 5px solid #95a5a6;
            font-size: 1.05em;
        }
        .button-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .button {
            background-color: #3498db;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            flex: 1 1 250px;
            max-width: 300px;
            text-align: center;
            text-decoration: none;
            box-sizing: border-box;
        }
        .button:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
        }
        
        .calculation-box {
            background-color: #e8f6f3;
            border: 1px solid #d1eeeb;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1.1em;
            color: #21618C;
        }
        .calculation-box strong {
            color: #1a5276;
        }
        .calculator-section {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .calculator-title {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        .calculator-grid {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
        }
        .calculator-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .calculator-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .calculator-label {
            font-weight: bold;
            color: #495057;
            flex-shrink: 0;
        }
        .calculator-select {
            padding: 10px 15px;
            border: 2px solid #ced4da;
            border-radius: 8px;
            font-size: 1.1em;
            background-color: #fefcbf;
            cursor: pointer;
            transition: border-color 0.3s ease;
            width: 100%;
        }
        .calculator-select:focus {
            outline: none;
            border-color: #3498db;
        }
        .calculator-result {
            background-color: #e3f2fd;
            border: 2px solid #bbdefb;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1.1em;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #90caf9;
        }
        .result-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .result-label {
            font-weight: bold;
            color: #1565c0;
        }
        .result-value {
            font-weight: bold;
            color: #0d47a1;
            font-size: 1.2em;
        }
        #dynamic-content-area {
            border-top: 1px solid #e0e0e0;
            padding-top: 20px;
            margin-top: 20px;
            min-height: 100px;
        }
        .content-section {
            display: none;
        }
        .back-to-top-button {
            display: block;
            margin-top: 30px;
            padding: 15px 30px;
            background-color: #6c757d;
            color: white;
            text-align: center;
            border-radius: 8px;
            text-decoration: none;
            transition: background-color 0.3s ease;
            font-size: 1.2em;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
            cursor: pointer;
        }
        .back-to-top-button:hover {
            background-color: #5a6268;
        }

        @media (max-width: 768px) {
            body { font-size: 1em; padding: 10px; }
            .container { padding: 20px; margin: 10px auto; }
            .logo { height: 56px; width: 56px; }
            .button { flex: 1 1 calc(50% - 15px); font-size: 1.1em; padding: 12px 25px; }
            h1 { font-size: 2.2em; margin-top: 5px; margin-bottom: 5px; }
            p { font-size: 1em; }
            ul li { font-size: 1em; }
            .calculator-section { padding: 15px; margin-top: 15px; margin-bottom: 15px; }
            .calculator-title { font-size: 1.3em; margin-bottom: 15px; }
            .calculator-grid { flex-direction: column; gap: 5px; }
            .calculator-column { gap: 20px; }
            .calculator-row { flex-direction: column; align-items: stretch; gap: 8px; margin-bottom: 0; }
            .calculator-label { min-width: auto; font-size: 1.1em; margin-bottom: 5px; }
            .calculator-select { width: 100%; padding: 12px 15px; font-size: 1.2em; box-sizing: border-box; }
            .calculator-result { padding: 15px; margin-top: 15px; }
            .result-row { flex-direction: column; align-items: stretch; padding: 12px 0; gap: 5px; }
            .result-label { font-size: 1em; margin-bottom: 3px; }
            .result-value { font-size: 1.4em; text-align: right; color: #0d47a1; }
            .calculation-box { padding: 15px; margin-top: 15px; font-size: 1em; }
            .calculation-box h3 { font-size: 1.2em; margin-bottom: 12px; }
            .calculation-box div[style*="background-color: #fff"] { padding: 12px !important; font-size: 1em !important; }
            .calculation-box div[style*="font-size: 0.95em"] { font-size: 0.9em !important; }
        }

        @media (max-width: 480px) {
            body { font-size: 0.95em; padding: 5px; }
            .container { padding: 15px; margin: 5px auto; }
            .logo { height: 50px; width: 50px; }
            .button { flex: 1 1 100%; font-size: 1.1em; padding: 10px 20px; margin-bottom: 10px; }
            h1 { font-size: 1.8em; margin-top: 5px; margin-bottom: 5px; }
            h2 { font-size: 1.5em; margin-top: 25px; }
            p { font-size: 1em; }
            ul li { font-size: 1em; padding: 10px 12px; }
            .calculator-section { padding: 12px; }
            .calculator-title { font-size: 1.2em; }
            .calculator-select { padding: 14px 12px; font-size: 1.1em; }
            .result-value { font-size: 1.3em; }
            .calculation-box { padding: 12px; }
            .calculation-box h3 { font-size: 1.1em; }
        }
    
@media print {
    body {
        zoom: 80%;
    }
    .printable-summary {
        page-break-inside: avoid;
    }
}

/* Emoji 2x the surrounding text */


/* Mobile readability */
:root { --btn-pad-y: 12px; --btn-pad-x: 14px; --btn-radius: 14px; }
#button-section button {
  padding: var(--btn-pad-y) var(--btn-pad-x);
  border-radius: var(--btn-radius);
  font-size: 1rem;
  min-height: 44px; /* comfortable touch target */
  display: inline-flex; align-items: center; gap: 8px;
}
#button-section { display: flex; flex-wrap: wrap; gap: 10px; }

/* Make paragraphs and lists comfy on mobile */
body { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }
main, .content { max-width: 920px; margin: 0 auto; padding: 10px; }
@media (max-width: 520px) {
  p, li { font-size: 1.05rem; line-height: 1.55; }
  h2 { font-size: 1.35rem; }
}

/* Print: keep emojis large relative to text */
@media print {  }

/* Emoji fixed size for readability */
.emoji { font-size: 20px; line-height: 1; vertical-align: -0.1em; }

/* Mobile tweaks kept */

/* Uniform width and centering for calculator page */
.calculator-section,
.calculation-box {
  max-width: 920px;       /* same as main/content */
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}

#dynamic-content-area {
  max-width: 920px;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}

/* Center align calculator grid and match section padding */
.calculator-grid {
  justify-content: center;
}

.calculator-section {
  padding-left: 30px;
  padding-right: 30px;
}

/* Larger emoji in H2 titles */
h2 .emoji { font-size: 1.5em; vertical-align: middle; }
</style>
</head>
<body id="top">
<div class="container">
<h1>
<img alt="Joy Fit Logo" class="logo" src="https://sebastiano-mazzarisi.github.io/Test/JoyFit.jpg"/>
<span>Joy Fit</span>
</h1>
<div class="button-section" id="button-section">
<button class="button" onclick="showContent('fitto')"><span class="emoji">🏠</span>Revisione Fitto</button>
<button class="button" onclick="showContent('versamento')"><span class="emoji">💰</span>Restituzione Versamento</button>
<button class="button" onclick="showContent('amministratore')"><span class="emoji">👔</span>Retribuzione Amministratore</button>
<button class="button" onclick="showContent('checco')"><span class="emoji">🏋️‍♂️</span>Retribuzione Checco</button>
<button class="button" onclick="showContent('mimmo')"><span class="emoji">🧑‍⚕️</span>Retribuzione Mimmo</button>
<button class="button" onclick="showContent('marica')"><span class="emoji">👩</span>Retribuzione Marica</button>
<button class="button" onclick="showContent('vantaggio')"><span class="emoji">📈</span>Incentivi</button>
<button class="button" onclick="printSummary()"><span class="emoji">🖨️</span>Stampa Riepilogo</button>
</div>
<div id="dynamic-content-area"></div>
<div style="display: none;">
<div class="content-section" id="fitto"><h2>Revisione fitto</h2><p>Con il nuovo soppalco il valore dell’immobile è aumentato: valutare l’adeguamento formale del fitto a € 3.600/mese, con rivalutazione annuale secondo ISTAT.</p></div>
<div class="content-section" id="versamento"><h2>Restituzione versamento</h2><p>Nel 2005 la palestra aveva debiti di circa € 70.000. Ho investito € 120.000 (atto del notaio Pantaleo del 23/12/2005) acquistando il 25% della società, con accordo di rientro tramite assunzione e pagamento dei soli contributi. Tali contributi si sono però rivelati troppo elevati; di conseguenza, invece di essere assunto io, dal 2006 è stata assunta Marica, che per 10 anni ha percepito solo i contributi (€ 250-300/mese). Oggi il suo netto è ancora inferiore a € 1.000/mese. Non c’è quindi stato alcun rientro graduale dell’investimento iniziale: la palestra ha beneficiato di una collaboratrice a un costo molto conveniente. È ora necessario pianificare la restituzione dei € 120.000 tramite rate mensili.</p><div class="calculator-section">
<div class="calculator-title">Calcolatore Restituzione</div>
<div class="calculator-grid">
<div class="calculator-column">
<div class="calculator-row">
<span class="calculator-label">Interesse prestito:</span>
<select class="calculator-select" id="interessePrestito" onchange="calculateLoan()">
<option value="2.0">2,0% (ISTAT)</option>
<option value="2.5">2,5%</option>
<option selected="" value="3.0">3,0% (BOT-CCT)</option>
<option value="3.5">3,5%</option>
<option value="4.0">4,0%</option>
<option value="4.5">4,5%</option>
<option value="5.0">5,0% (A rischio)</option>
</select>
</div>
</div>
<div class="calculator-column">
<div class="calculator-row">
<span class="calculator-label">Interesse restituzione:</span>
<select class="calculator-select" id="interesseRestituzione" onchange="calculateLoan()">
<option value="2.0">2,0%</option>
<option value="2.5">2,5%</option>
<option selected="" value="3.0">3,0%</option>
<option value="3.5">3,5%</option>
<option value="4.0">4,0%</option>
<option value="4.5">4,5%</option>
</select>
</div>
<div class="calculator-row">
<span class="calculator-label">Restituzione in anni:</span>
<select class="calculator-select" id="anni" onchange="calculateLoan()">
<option value="1">1 anno</option>
<option value="2">2 anni</option>
<option value="5">5 anni</option>
<option value="10">10 anni</option>
<option value="15">15 anni</option>
<option selected="" value="20">20 anni</option>
<option value="25">25 anni</option>
<option value="30">30 anni</option>
</select>
</div>
</div>
</div>
<div class="calculator-result" id="risultati">
<div class="result-row">
<span class="result-label">Capitale al 23/12/2005:</span>
<span class="result-value">€ 120.000</span>
</div>
<div class="result-row">
<span class="result-label">Montante oggi (<span id="data-oggi"></span>):</span>
<span class="result-value" id="montante">€ 0</span>
</div>
<div class="result-row">
<span class="result-label">Rata mensile:</span>
<span class="result-value" id="rata">€ 0</span>
</div>
</div>
</div><div class="calculation-box">
<h3 style="color: #1a5276; margin-top: 0; margin-bottom: 15px; text-align: center;">Formule finanziarie utilizzate</h3>
<div style="margin-bottom: 20px;">
<strong style="color: #1a5276;">Calcolo del Montante (Interesse Composto):</strong>
<div style="background-color: #fff; padding: 15px; border-radius: 6px; margin-top: 8px; font-family: monospace; font-size: 1.1em; border-left: 4px solid #3498db; overflow-x: auto;">
                            M = C × (1 + i)<sup>n</sup>
</div>
<div style="margin-top: 10px; font-size: 0.95em; color: #2c3e50;">
<strong>M</strong>: Montante finale, <strong>C</strong>: Capitale iniziale (€ 120.000), <strong>i</strong>: Tasso annuo (prestito), <strong>n</strong>: Anni trascorsi.
                        </div>
</div>
<div>
<strong style="color: #1a5276;">Calcolo della Rata Mensile (Ammortamento francese):</strong>
<div style="background-color: #fff; padding: 15px; border-radius: 6px; margin-top: 8px; font-family: monospace; font-size: 1.1em; border-left: 4px solid #e74c3c; overflow-x: auto;">
                            R = M × [i<sub>m</sub> × (1 + i<sub>m</sub>)<sup>t</sup>] / [(1 + i<sub>m</sub>)<sup>t</sup> - 1]
                        </div>
<div style="margin-top: 10px; font-size: 0.95em; color: #2c3e50;">
<strong>R</strong>: Rata mensile, <strong>M</strong>: Montante da restituire, <strong>i<sub>m</sub></strong>: Tasso mensile (restituzione ÷ 12), <strong>t</strong>: Mesi totali.
                        </div>
</div>
</div></div>
<div class="content-section" id="amministratore"><h2>Retribuzione amministratore</h2><p>Il ruolo deve essere retribuito con un importo annuo e una polizza assicurativa, il cui valore va determinato con una rapida ricerca di mercato in zona. Il ruolo di Amministratore, a parità di costo, può essere ricoperto a turno tra i soci o affidato a un professionista esterno.</p></div>
<div class="content-section" id="checco"><h2>Retribuzione Checco</h2><p>Compenso equivalente a quello di un istruttore con funzioni anche di coordinatore. Se Checco ricopre il ruolo di Amministratore, percepirà il compenso previsto per tale incarico e, come istruttore, un importo inferiore, considerando che nelle stesse ore svolge anche mansioni amministrative. Nessuna attività extra deve essere remunerata: tutti gli incassi vanno alle casse della palestra; gli incentivi per i soci vengono riconosciuti in altre forme.</p></div>
<div class="content-section" id="mimmo"><h2>Retribuzione Mimmo</h2><p>Compenso equivalente a quello di un istruttore con funzioni anche di coordinatore. Se Checco mantiene il ruolo di Amministratore, a parità di mansioni Mimmo avrà un compenso superiore. Nessuna attività extra deve essere remunerata: tutti gli incassi vanno alle casse della palestra; gli incentivi per i soci vengono riconosciuti in altre forme.</p></div>
<div class="content-section" id="marica"><h2>Retribuzione Marica</h2><p>Compenso equivalente a quello di una segretaria part-time (25 ore settimanali). La retribuzione netta sarà inferiore a quella attuale, ma con importi reali ai quali si aggiungeranno contributi, tredicesima, TFR e altri benefici contrattuali.</p></div>
<div class="content-section" id="vantaggio"><h2>Futuro</h2><p>Nessun socio (Checco, Marica, Flavia) percepirà incentivi oltre alla retribuzione stabilita. Tutti parteciperanno agli incontri semestrali (luglio e gennaio) per decidere come investire eventuali extra.</p></div>
</div>
</div>
<script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const TITLES = {
                'fitto': '<span class="emoji">🏠</span> Revisione Fitto',
                'versamento': '<span class="emoji">💰</span> Restituzione Versamento',
                'amministratore': '<span class="emoji">👔</span> Retribuzione Amministratore',
                'checco': '<span class="emoji">🏋️‍♂️</span> Retribuzione Checco',
                'mimmo': '<span class="emoji">🧑‍⚕️</span> Retribuzione Mimmo',
                'marica': '<span class="emoji">👩</span> Retribuzione Marica',
                'vantaggio': '<span class="emoji">📈</span> Incentivi'
            };

            window.showContent = function(sectionId) {
                const dynamicContentArea = document.getElementById('dynamic-content-area');
                const sourceSection = document.getElementById(sectionId);
                const buttonSection = document.getElementById('button-section'); 

                dynamicContentArea.innerHTML = '';

                if (sourceSection) {
                    const clonedContent = sourceSection.cloneNode(true);
                    const h2 = clonedContent.querySelector('h2');
                    if (h2 && TITLES[sectionId]) {
                        h2.innerHTML = TITLES[sectionId];
                    }
                    clonedContent.style.display = 'block';
                    dynamicContentArea.appendChild(clonedContent);
                    
                    if (sectionId === 'versamento') {
                        setTimeout(() => calculateLoan(), 50);
                    }
                    
                    try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch(e) { window.scrollTo(0,0); }
                }
            };

            window.calculateLoan = function() {
                const capitale = 120000;
                const dataInizio = new Date(2005, 11, 23); // Mese 11 = Dicembre
                const dataOggi = new Date();
                
                const gg = String(dataOggi.getDate()).padStart(2, '0');
                const mm = String(dataOggi.getMonth() + 1).padStart(2, '0');
                const aaaa = dataOggi.getFullYear();
                const dataOggiEl = document.getElementById('data-oggi');
                if(dataOggiEl) {
                    dataOggiEl.textContent = `${gg}/${mm}/${aaaa}`;
                }

                const interessePrestitoEl = document.getElementById('interessePrestito');
                const interesseRestituzioneEl = document.getElementById('interesseRestituzione');
                const anniEl = document.getElementById('anni');

                if (!interessePrestitoEl || !interesseRestituzioneEl || !anniEl) return;

                const interessePrestito = parseFloat(interessePrestitoEl.value) / 100;
                const interesseRestituzione = parseFloat(interesseRestituzioneEl.value) / 100;
                const anniRestituzione = parseInt(anniEl.value);

                const anniTrascorsi = (dataOggi - dataInizio) / (1000 * 60 * 60 * 24 * 365.25);
                
                const montante = capitale * Math.pow(1 + interessePrestito, anniTrascorsi);
                const mesiRestituzione = anniRestituzione * 12;
                const interesseMensileRestituzione = interesseRestituzione / 12;
                
                let rataMensile;
                if (interesseMensileRestituzione === 0) {
                    rataMensile = montante / mesiRestituzione;
                } else {
                    rataMensile = montante * (interesseMensileRestituzione * Math.pow(1 + interesseMensileRestituzione, mesiRestituzione)) / 
                                 (Math.pow(1 + interesseMensileRestituzione, mesiRestituzione) - 1);
                }
                
                const montanteArrotondato = Math.round(montante / 100) * 100;
                const rataArrotondata = Math.round(rataMensile / 100) * 100;

                const montanteEl = document.getElementById('montante');
                const rataEl = document.getElementById('rata');
                if (montanteEl) montanteEl.textContent = '€ ' + formatNumber(montanteArrotondato);
                if (rataEl) rataEl.textContent = '€ ' + formatNumber(rataArrotondata);
            };

            window.formatNumber = function(num) {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            };

            window.resetApp = function() {
                const dynamicContentArea = document.getElementById('dynamic-content-area');
                dynamicContentArea.innerHTML = '';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            function collectSectionsAsHTML() {
                const order = ['fitto', 'versamento', 'amministratore', 'checco', 'mimmo', 'marica', 'vantaggio'];
                const hiddenContainer = document.querySelector('div[style*="display: none"]');
                let html = '';
                
                order.forEach(id => {
                    const sectionNode = hiddenContainer.querySelector('#' + id);
                    if (!sectionNode) return;

                    const clone = sectionNode.cloneNode(true);
                    
                    clone.querySelectorAll('.calculator-section, .calculation-box, .back-to-top-button, h2').forEach(el => el.remove());
                    
                    const title = TITLES[id] || '';
                    html += `<h3>${title}</h3>`;
                    
                    clone.childNodes.forEach(node => {
                        if (node.nodeName === 'P' || node.nodeName === 'H3' || node.nodeName === 'UL') {
                           html += node.outerHTML;
                        }
                    });
                    html += '<hr>';
                });
                return html.slice(0, -4); // Rimuove l'ultimo <hr>
            }

            function buildPrintableHTML(logoSrc) {
                const dateStr = new Date().toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
                const content = collectSectionsAsHTML();
                return `<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Joy Fit</title>
<style>
@page { size: A4; margin: 12mm; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; }
h1 { display:none; }
h1 img { height: 24pt; width: 24pt; border-radius:4px; object-fit:cover; }
h3 { font-size: 12pt; margin: 10pt 0 4pt; color: #3498db; }
p, li { font-size: 10pt; margin: 3pt 0; line-height: 1.35; }
ul { margin: 2pt 0 4pt 18pt; padding: 0; list-style-type: disc; }
.small { font-size: 8.5pt; color: #555; margin-bottom: 6pt; }
hr { border: none; border-top: 1px solid #ccc; margin: 12pt 0; }
strong { color: #000; }

.print-footer{
  position: fixed;
  bottom: 1.5mm;
  left: 0; right: 0;
  text-align: center;
  font-size: 9pt;
  color: #444;
}

@media print { .emoji { font-size: 20px; } }
</style>
</head>
<body>
${content}
<div class="print-footer"><span id="print-date"></span></div>
<script>
window.onload = function(){
    const d = new Date();
    const dd = String(d.getDate()).padStart(2,'0');
    const mm = String(d.getMonth()+1).padStart(2,'0');
    const yyyy = d.getFullYear();
    const text = dd + '/' + mm + '/' + yyyy;
    const el = document.getElementById('print-date');
    if (el) el.textContent = text;
    window.print();
    setTimeout(() => window.close(), 500);
};
<\/script>
</body>
</html>`;
            }

            window.printSummary = function() {
    const logoEl = document.querySelector('.logo');
    const logoSrc = logoEl ? logoEl.src : '';
    const printableHTML = buildPrintableHTML(logoSrc);

    const iframe = document.createElement('iframe');
    iframe.setAttribute('aria-hidden', 'true');
    Object.assign(iframe.style, {
        position: 'fixed',
        left: '-10000px',
        top: '-10000px',
        width: '0',
        height: '0',
        opacity: '0',
        pointerEvents: 'none'
    });
    document.body.appendChild(iframe);

    iframe.onload = function(){
        const w = iframe.contentWindow;
        try { w.document.title = 'Joy Fit'; } catch(e){}
        setTimeout(() => { try { w.print(); } catch(e){} }, 50);
        const cleanup = () => { if (iframe && iframe.parentNode) iframe.parentNode.removeChild(iframe); };
        w.onafterprint = cleanup;
        setTimeout(cleanup, 60000);
    };
    iframe.srcdoc = buildPrintableHTML(logoSrc);
};

        });
    </script>
</body>
</html>