<!DOCTYPE html>
<html lang="it"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Monitor</title>
<style>body{margin:0;padding:20px;font-family:sans-serif;background:#e9edf5;display:flex;justify-content:center} .box{background:#fff;border-radius:12px;padding:20px;width:100%;max-width:600px;box-shadow:0 4px 15px rgba(0,0,0,0.1)} h1{text-align:center;color:#1F497D} table{width:100%;border-collapse:collapse} th,td{padding:10px;border-bottom:1px solid #eee} .num{font-weight:bold;color:#2563eb;float:right} .btn{background:#dc2626;color:white;border:none;padding:10px;width:100%;border-radius:8px;font-weight:bold;cursor:pointer;margin-bottom:20px} .btn-x{background:white;border:1px solid #ccc;color:#999;border-radius:4px;padding:2px 8px;float:right;cursor:pointer}</style></head>
<body><div class="box"><h1>ðŸ“Š Monitor</h1><button class="btn" onclick="resetAll()">AZZERA TUTTO</button><table id="t"></table></div>
<script>
const API="https://countapi.mileshilliard.com/api/v1", NS="joyfit-stats-v1";
const PGS=[
    {id:'report_home',n:"Home Incassi"},
    {id:'report_global_list',n:"Anagrafica"},
    {id:'report_cust_detail',n:"Cliente"},
    {id:'report_attivita',n:"AttivitÃ  ðŸ§˜"},
    {id:'report_istruttori',n:"Istruttori ðŸ’ª"},
    ...["SET","OTT","NOV","DIC","GEN","FEB","MAR","APR","MAG","GIU","LUG","AGO"].map(m=>({id:`report_${m}`,n:m}))
];
const get=async u=>(await(await fetch(u)).json()).value||0; const set=async(i,v)=>fetch(`${API}/set/${NS}_${i}?value=${v}`);
async function load(){let h=""; for(let p of PGS){try{let v=await get(`${API}/get/${NS}_${p.id}`); h+=`<tr style="${v>0?'background:#f0f9ff':''}"><td>${p.n}</td><td><span class="num">${v}</span></td><td onclick="set('${p.id}',0);load();" class="btn-x">X</td></tr>`;}catch(e){}} document.getElementById("t").innerHTML=h;}
function resetAll(){if(confirm("Azzerare tutto?")){PGS.forEach(p=>set(p.id,0)); setTimeout(load,1000);}}
load(); setInterval(load,10000);
</script></body></html>