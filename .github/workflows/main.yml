name: Test di Connessione con Debug Avanzato

on:
  workflow_dispatch: # Permette l'avvio manuale

jobs:
  advanced-debug-test:
    runs-on: ubuntu-latest
    steps:
      - name: Invia notifica di test con diagnostica completa
        run: |
          # 1. Definiamo una variabile con il comando esatto da eseguire.
          #    Ho inserito il tuo topic "msgalternativo".
          #    L'opzione "-v" a curl ci dar√† un output "verboso".
          FULL_COMMAND="curl -v -d 'Test finale di debug da GitHub' ntfy.sh/msgalternativo"

          # 2. Stampiamo nel log il comando che stiamo per eseguire
          echo "--- COMANDO CHE VERRA' ESEGUITO ---"
          echo $FULL_COMMAND
          echo "------------------------------------"

          # 3. Eseguiamo il comando
          $FULL_COMMAND
